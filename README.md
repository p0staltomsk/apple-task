# apple-task
just task

Задача:

Установить advanced шаблон Yii2 фреймворка, **в backend-приложении реализовать** следующий закрытый функционал 
(доступ в backend-приложение должен производиться **только по паролю** (!), сложного разделения прав не требуется):

Написать класс/объект Apple с хранением яблок в БД MySql следуя ООП парадигме.

**Реализовать кнопки, формы, соответствующие функции:**

На странице в приложении должны быть отображены все яблоки, (view)
которые на этой же странице можно сгенерировать (инициализация дерева) в случайном кол-ве соответствующей кнопкой.

Рядом с каждым яблоком должны быть меню, статусы, функции (уронить, съесть, процент количества).

План действий:

1) Структура БД сразу через миграции (https://www.yiiframework.com/doc/guide/2.0/ru/db-migrations)
2) Написание кода/класса/логики приложения

=== Инструкция по установке ===

Install migrations:

    m191024_102020_push_active_user - активный пользователь
    m191024_112713_create_apples_table - таблица яблок
    m191024_113408_create_colors_table - таблица цветов яблок
    m191024_113810_create_status_table - таблица статусов яблок

=== Функционал ===

Функции (AppleController)

    - инициализация дерева (рандом)
    - пропустить час    
    - упасть
    - съесть ($percent - процент откушенной части)
    - удалить (когда полностью съедено)

Переменные (свойства объекта)

    - цвет (устанавливается при создании объекта случайным)
    - дата появления (устанавливается при создании объекта случайным unixTmeStamp)
    - дата падения (устанавливается при падении объекта с дерева)
    - статус (на дереве / упало)
    - сколько съели (%)
    - другие необходимые переменные, для определения состояния.

Состояния (status)

    - висит на дереве
    - упало/лежит на земле
    - гнилое яблоко

Условия (Алгоритм)

    Пока висит на дереве - испортиться не может. (статусы)
    Когда висит на дереве - съесть не получится. (статусы)
    После лежания 5 часов - портится. (статус + dateFalls)
    Когда испорчено - съесть не получится. (статус + исключение в функции)
    Когда съедено - удаляется из массива яблок. (quantity == 0)

Пример результирующего скрипта:

    $apple = new Apple('green'); // (функция - создать яблоко)
        echo $apple->color; // green (функция - осмотреть цвет яблока)
            
    $apple->eat(50); // (функция - откусить пол яблока) 
        // Бросить исключение - Съесть нельзя, если яблоко на дереве.
        echo $apple->size; // 1 - decimal (функция - осмотреть количество яблока)
        
    $apple->fallToGround(); // (функция) уронить яблоко на землю
    $apple->eat(25); // (функция) откусить четверть яблока
        echo $apple->size; // 0,75 (функция - осмотреть количество яблока)
